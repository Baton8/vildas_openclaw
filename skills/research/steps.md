# Research - 詳細手順

調査は **テーマ分析 → 検索ループ（2〜3ラウンド）→ まとめ** の流れで行う。
各ラウンドで得た情報をもとに次の検索を深化させていく。

---

## Phase 1: テーマ分析

調査を始める前に、テーマを構造的に分解する。

**考えること:**
- このテーマの核心は何か？（一言で言うと）
- どんな切り口が考えられるか？（歴史・仕組み・人物・数値・エピソードなど）
- クイズの素材として面白くなりそうな角度はどれか？
- 調べるべき具体的なサブトピックを3〜5個列挙する

**出力:** 調査計画（サブトピック一覧と優先順位）

---

## Phase 2: 調査ループ（2〜3ラウンド繰り返す）

### 検索ツールの選び方

| 状況 | 使うツール |
|------|-----------|
| 概要把握・一般的な情報収集 | `web_search` / `web_fetch` (DuckDuckGo) |
| 複雑なテーマ・最新情報・深掘りが必要 | Gemini Google Search Grounding |
| 特定URLの内容を読む | `web_fetch` |

**基本方針:** 最初のラウンドは Gemini grounding で広く拾い、2ラウンド目以降で特定URLを `web_fetch` で深読みする。

---

### 2-A: Gemini Google Search Grounding を使う場合

```
exec: python3 /workspace/tools/gemini_search.py "検索クエリ"
```

**良いクエリの作り方:**
- 具体的な事実を引き出せるクエリ（「〇〇 仕組み 詳細」「〇〇 歴史 起源」など）
- 日本語・英語を使い分ける（英語の方が一次情報が多いテーマもある）

**結果の使い方:**
- `=== 回答 ===` セクションの内容を情報として記録する
- `=== ソース ===` のURLを次のラウンドで `web_fetch` する候補にする

---

### 2-B: DuckDuckGo / web_fetch を使う場合

DuckDuckGoで検索する:
```
web_fetch(url="https://lite.duckduckgo.com/lite/?q=QUERY&kl=jp-jp", extractMode="text", maxChars=8000)
```
- クエリはURLエンコード（スペースは `+`）
- 日本語コンテンツが欲しい場合は `&kl=jp-jp`
- 英語情報が必要な場合は `&kl=us-en`

---

### 2-C: 情報抽出

各ラウンドで得た情報から以下を記録する:
- ソースの種類（一次・二次・三次）と信頼性評価
- 取得できた具体的な情報（数値・固有名詞・エピソードなど）
- クイズ素材として使えそうな「知って面白い情報」
- 次のラウンドで深掘りしたい点

---

### 2-D: 不足点の特定と次ラウンドの計画

このラウンドで得た情報を振り返り:
- 信頼できる情報として確認できたこと
- まだ裏が取れていないこと
- 想定外に面白かった情報（掘り下げ価値あり）
- 次ラウンドで調べるサブトピック・検索ワード

**終了判断:** 以下を満たせば調査を終える
- 目的（クイズ作成 or 調査レポート）に足るだけの素材が揃っている
- 重要な事実に一次または信頼性の高い二次情報で裏がとれている
- 2〜3ラウンド完了している

---

## Phase 3: 情報まとめ

収集した情報を整理する。`quiz-create` スキルへの引き渡しや、単体の調査レポートとして使える形にまとめる。

**まとめの構成:**
```
# [テーマ名] 調査まとめ

## 概要
（テーマの基本情報を2〜3文で）

## 主要な事実
- 事実1（出典: ）
- 事実2（出典: ）
- ...

## 面白いエピソード・豆知識
- ...

## 数値・固有名詞
- ...

## 参照ソース
- [URL]（一次/二次、信頼性: 高/中/低）
- ...
```

クイズを作る場合は、このまとめを `quiz-create` スキルの入力テキストとして渡す。
